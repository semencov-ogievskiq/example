(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{486:function(e,t,n){var map={"./af":346,"./af.js":346,"./ar":347,"./ar-dz":348,"./ar-dz.js":348,"./ar-kw":349,"./ar-kw.js":349,"./ar-ly":350,"./ar-ly.js":350,"./ar-ma":351,"./ar-ma.js":351,"./ar-sa":352,"./ar-sa.js":352,"./ar-tn":353,"./ar-tn.js":353,"./ar.js":347,"./az":354,"./az.js":354,"./be":355,"./be.js":355,"./bg":356,"./bg.js":356,"./bm":357,"./bm.js":357,"./bn":358,"./bn-bd":359,"./bn-bd.js":359,"./bn.js":358,"./bo":360,"./bo.js":360,"./br":361,"./br.js":361,"./bs":362,"./bs.js":362,"./ca":363,"./ca.js":363,"./cs":364,"./cs.js":364,"./cv":365,"./cv.js":365,"./cy":366,"./cy.js":366,"./da":367,"./da.js":367,"./de":368,"./de-at":369,"./de-at.js":369,"./de-ch":370,"./de-ch.js":370,"./de.js":368,"./dv":371,"./dv.js":371,"./el":372,"./el.js":372,"./en-au":373,"./en-au.js":373,"./en-ca":374,"./en-ca.js":374,"./en-gb":375,"./en-gb.js":375,"./en-ie":376,"./en-ie.js":376,"./en-il":377,"./en-il.js":377,"./en-in":378,"./en-in.js":378,"./en-nz":379,"./en-nz.js":379,"./en-sg":380,"./en-sg.js":380,"./eo":381,"./eo.js":381,"./es":382,"./es-do":383,"./es-do.js":383,"./es-mx":384,"./es-mx.js":384,"./es-us":385,"./es-us.js":385,"./es.js":382,"./et":386,"./et.js":386,"./eu":387,"./eu.js":387,"./fa":388,"./fa.js":388,"./fi":389,"./fi.js":389,"./fil":390,"./fil.js":390,"./fo":391,"./fo.js":391,"./fr":392,"./fr-ca":393,"./fr-ca.js":393,"./fr-ch":394,"./fr-ch.js":394,"./fr.js":392,"./fy":395,"./fy.js":395,"./ga":396,"./ga.js":396,"./gd":397,"./gd.js":397,"./gl":398,"./gl.js":398,"./gom-deva":399,"./gom-deva.js":399,"./gom-latn":400,"./gom-latn.js":400,"./gu":401,"./gu.js":401,"./he":402,"./he.js":402,"./hi":403,"./hi.js":403,"./hr":404,"./hr.js":404,"./hu":405,"./hu.js":405,"./hy-am":406,"./hy-am.js":406,"./id":407,"./id.js":407,"./is":408,"./is.js":408,"./it":409,"./it-ch":410,"./it-ch.js":410,"./it.js":409,"./ja":411,"./ja.js":411,"./jv":412,"./jv.js":412,"./ka":413,"./ka.js":413,"./kk":414,"./kk.js":414,"./km":415,"./km.js":415,"./kn":416,"./kn.js":416,"./ko":417,"./ko.js":417,"./ku":418,"./ku.js":418,"./ky":419,"./ky.js":419,"./lb":420,"./lb.js":420,"./lo":421,"./lo.js":421,"./lt":422,"./lt.js":422,"./lv":423,"./lv.js":423,"./me":424,"./me.js":424,"./mi":425,"./mi.js":425,"./mk":426,"./mk.js":426,"./ml":427,"./ml.js":427,"./mn":428,"./mn.js":428,"./mr":429,"./mr.js":429,"./ms":430,"./ms-my":431,"./ms-my.js":431,"./ms.js":430,"./mt":432,"./mt.js":432,"./my":433,"./my.js":433,"./nb":434,"./nb.js":434,"./ne":435,"./ne.js":435,"./nl":436,"./nl-be":437,"./nl-be.js":437,"./nl.js":436,"./nn":438,"./nn.js":438,"./oc-lnc":439,"./oc-lnc.js":439,"./pa-in":440,"./pa-in.js":440,"./pl":441,"./pl.js":441,"./pt":442,"./pt-br":443,"./pt-br.js":443,"./pt.js":442,"./ro":444,"./ro.js":444,"./ru":445,"./ru.js":445,"./sd":446,"./sd.js":446,"./se":447,"./se.js":447,"./si":448,"./si.js":448,"./sk":449,"./sk.js":449,"./sl":450,"./sl.js":450,"./sq":451,"./sq.js":451,"./sr":452,"./sr-cyrl":453,"./sr-cyrl.js":453,"./sr.js":452,"./ss":454,"./ss.js":454,"./sv":455,"./sv.js":455,"./sw":456,"./sw.js":456,"./ta":457,"./ta.js":457,"./te":458,"./te.js":458,"./tet":459,"./tet.js":459,"./tg":460,"./tg.js":460,"./th":461,"./th.js":461,"./tk":462,"./tk.js":462,"./tl-ph":463,"./tl-ph.js":463,"./tlh":464,"./tlh.js":464,"./tr":465,"./tr.js":465,"./tzl":466,"./tzl.js":466,"./tzm":467,"./tzm-latn":468,"./tzm-latn.js":468,"./tzm.js":467,"./ug-cn":469,"./ug-cn.js":469,"./uk":470,"./uk.js":470,"./ur":471,"./ur.js":471,"./uz":472,"./uz-latn":473,"./uz-latn.js":473,"./uz.js":472,"./vi":474,"./vi.js":474,"./x-pseudo":475,"./x-pseudo.js":475,"./yo":476,"./yo.js":476,"./zh-cn":477,"./zh-cn.js":477,"./zh-hk":478,"./zh-hk.js":478,"./zh-mo":479,"./zh-mo.js":479,"./zh-tw":480,"./zh-tw.js":480};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(map,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return map[e]}r.keys=function(){return Object.keys(map)},r.resolve=o,e.exports=r,r.id=486},520:function(e,t,n){"use strict";n.r(t);n(13),n(12),n(9),n(15),n(11),n(16);var r=n(3),o=n(28),l=(n(66),n(341)),d=n.n(l),m=n(487);function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var j={layout:"unauthorized",data:function(){return{toggle:!1,signIn:{login:{username:"",password:""},loading:!1},signUp:{form:{mail:null,password:null,repeatPassword:null,f:null,i:null,dt_birth:null},loading:null}}},validations:{signIn:{login:{username:{required:m.required,email:m.email},password:{required:m.required}}},signUp:{form:{mail:{required:m.required,email:m.email},password:{required:m.required,minLength:Object(m.minLength)(6)},repeatPassword:{required:m.required,sameAs:Object(m.sameAs)("password")},f:{required:m.required,minLength:Object(m.minLength)(2)},i:{required:m.required,minLength:Object(m.minLength)(2)},dt_birth:{required:m.required}},loading:null,typeAlert:null,alert:!1,msgAlert:{head:null,body:null}}},methods:{toggleClick:function(e){e!=this.toggle&&(this.toggle=!this.toggle)},onSubmitSignIn:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.signIn.loading){t.next=5;break}return e.signIn.loading=!0,t.next=4,e.$auth.loginWith("local",{data:e.signIn.login}).then((function(){e.signIn.loading=!1})).catch((function(t){t.response.data.typeErr&&(e.signIn.err=t.response.data,e.signIn.loading=!1,e.signIn.login.password="")}));case 4:t.sent;case 5:case"end":return t.stop()}}),t)})))()},autoLogin:function(){this.toggleClick(!0),this.signIn.login.username=this.signUp.form.mail,this.signIn.login.password=this.signUp.form.password,this.onResetSignUp(),this.onSubmitSignIn()},onResetSignUp:function(){this.signUp.form={mail:null,password:null,repeatPassword:null,f:null,i:null,dt_birth:null},this.$v.signUp.form.$reset()},onSubmitSignUp:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,r,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.hideAlertRegForm(),e.$v.signUp.form.mail.$dirty&&e.$v.signUp.form.password.$dirty&&e.$v.signUp.form.repeatPassword.$dirty&&e.$v.signUp.form.f.$dirty&&e.$v.signUp.form.i.$dirty&&e.$v.signUp.form.dt_birth.$dirty){t.next=5;break}e.showAlertRegForm("danger","Внимание","Заполните все обязательные поля"),t.next=26;break;case 5:return n=e.$root.context.env.backendUrl+"/registration",r=c(c({},e.signUp.form),{},{dt_birth:d()(e.signUp.form.dt_birth).format("DD.MM.YYYY")}),o={onUploadProgress:function(e){this.signUp.loading=parseInt(Math.round(e.loaded/e.total*100))}.bind(e),validateStatus:function(e){return e>=200&&e<500}},t.prev=8,t.next=11,e.$axios.post(n,r,o);case 11:if(!((l=t.sent).status>=400)){t.next=14;break}throw new Error(l.status+" - "+l.statusText);case 14:if(l.data.id){t.next=16;break}throw new Error("Не пришел идентификатор пользователя");case 16:e.signUp.loading=null,e.showAlertRegForm("success","Внимание","Пользоатель зарегистрирован"),e.autoLogin(),t.next=26;break;case 21:t.prev=21,t.t0=t.catch(8),e.signUp.loading=null,e.showAlertRegForm("danger","Внимание","В результате регистрации пользователя произошла ошибка. Проверте введенные данные в форму и повторите попытку"),console.log(t.t0);case 26:case"end":return t.stop()}}),t,null,[[8,21]])})))()},showAlertRegForm:function(e,t,n){this.signUp.typeAlert=e,this.signUp.alert=!0,this.signUp.msgAlert={head:t,body:n}},hideAlertRegForm:function(){this.signUp.typeAlert=null,this.signUp.alert=!1,this.signUp.msgAlert={head:null,body:null}}}},v=n(77),component=Object(v.a)(j,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",{attrs:{cols:"12",sm:"10","offset-sm":"1",md:"8","offset-md":"2",lg:"6","offset-lg":"3",xl:"4","offset-xl":"4"}},[n("b-nav",{staticClass:"mb-4",attrs:{tabs:"",justified:""}},[n("b-nav-item",{attrs:{active:!e.toggle},on:{click:function(t){return e.toggleClick(!1)}}},[e._v("Авторизация")]),e._v(" "),n("b-nav-item",{attrs:{active:e.toggle},on:{click:function(t){return e.toggleClick(!0)}}},[e._v("Регистрация")])],1),e._v(" "),e.toggle?n("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmitSignUp(t)},reset:e.onResetSignUp}},[n("div",{staticStyle:{height:"2rem"}},[e.signUp.loading?n("b-progress",{attrs:{value:e.signUp.loading,max:"100","show-progress":"",animated:""}},[n("b-progress-bar",{attrs:{value:e.signUp.loading,label:e.signUp.loading+"%"}})],1):e._e()],1),e._v(" "),e.signUp.alert?n("b-alert",{attrs:{show:"",variant:e.signUp.typeAlert?e.signUp.typeAlert:null}},[n("h4",[e._v(e._s(e.signUp.msgAlert.head))]),e._v(" "),n("p",[e._v(e._s(e.signUp.msgAlert.body))])]):e._e(),e._v(" "),n("b-form-group",{attrs:{label:"Email","label-for":"Email"}},[n("b-form-input",{attrs:{id:"Email",disabled:Boolean(e.signUp.loading),type:"email",state:e.$v.signUp.form.mail.$dirty?!e.$v.signUp.form.mail.$invalid:null},model:{value:e.$v.signUp.form.mail.$model,callback:function(t){e.$set(e.$v.signUp.form.mail,"$model","string"==typeof t?t.trim():t)},expression:"$v.signUp.form.mail.$model"}}),e._v(" "),n("b-form-invalid-feedback",{attrs:{id:"F"}},[e._v("\n                Поле должно содержать корректный email адрес\n            ")])],1),e._v(" "),n("b-form-group",{attrs:{label:"Пароль","label-for":"Password"}},[n("b-form-input",{attrs:{id:"Password",disabled:Boolean(e.signUp.loading),type:"password",state:e.$v.signUp.form.password.$dirty?!e.$v.signUp.form.password.$invalid:null},model:{value:e.$v.signUp.form.password.$model,callback:function(t){e.$set(e.$v.signUp.form.password,"$model","string"==typeof t?t.trim():t)},expression:"$v.signUp.form.password.$model"}}),e._v(" "),n("b-form-invalid-feedback",{attrs:{id:"Password"}},[e._v("\n                Пароль должен быть не менее 6 символов\n            ")])],1),e._v(" "),n("b-form-group",{attrs:{label:"Повторите пароль","label-for":"RepeatPassword"}},[n("b-form-input",{attrs:{id:"RepeatPassword",disabled:Boolean(e.signUp.loading),type:"password",state:e.$v.signUp.form.repeatPassword.$dirty?!e.$v.signUp.form.repeatPassword.$invalid:null},model:{value:e.$v.signUp.form.repeatPassword.$model,callback:function(t){e.$set(e.$v.signUp.form.repeatPassword,"$model","string"==typeof t?t.trim():t)},expression:"$v.signUp.form.repeatPassword.$model"}}),e._v(" "),n("b-form-invalid-feedback",{attrs:{id:"RepeatPassword"}},[e._v("\n                Пароли не совпадают\n            ")])],1),e._v(" "),n("b-form-group",{attrs:{label:"Фамилия","label-for":"F"}},[n("b-form-input",{attrs:{id:"F",disabled:Boolean(e.signUp.loading),type:"text",state:e.$v.signUp.form.f.$dirty?!e.$v.signUp.form.f.$invalid:null},model:{value:e.$v.signUp.form.f.$model,callback:function(t){e.$set(e.$v.signUp.form.f,"$model","string"==typeof t?t.trim():t)},expression:"$v.signUp.form.f.$model"}}),e._v(" "),n("b-form-invalid-feedback",{attrs:{id:"F"}},[e._v("\n                Поле должно содержать хотя бы два символа\n            ")])],1),e._v(" "),n("b-form-group",{attrs:{label:"Имя","label-for":"I"}},[n("b-form-input",{attrs:{id:"I",disabled:Boolean(e.signUp.loading),type:"text",state:e.$v.signUp.form.i.$dirty?!e.$v.signUp.form.i.$invalid:null},model:{value:e.$v.signUp.form.i.$model,callback:function(t){e.$set(e.$v.signUp.form.i,"$model","string"==typeof t?t.trim():t)},expression:"$v.signUp.form.i.$model"}}),e._v(" "),n("b-form-invalid-feedback",{attrs:{id:"I"}},[e._v("\n                Поле должно содержать хотя бы два символа\n            ")])],1),e._v(" "),n("b-form-group",{attrs:{label:"Дата рожденья","label-for":"DB"}},[n("b-form-datepicker",{attrs:{id:"DB",disabled:Boolean(e.signUp.loading),state:e.$v.signUp.form.dt_birth.$dirty?!e.$v.signUp.form.dt_birth.$invalid:null,placeholder:"","date-format-options":{day:"numeric",month:"numeric",year:"numeric"},locale:"ru"},model:{value:e.$v.signUp.form.dt_birth.$model,callback:function(t){e.$set(e.$v.signUp.form.dt_birth,"$model","string"==typeof t?t.trim():t)},expression:"$v.signUp.form.dt_birth.$model"}}),e._v(" "),n("b-form-invalid-feedback",{attrs:{id:"DB"}},[e._v("\n                Поле обязательно для заполнения\n            ")])],1),e._v(" "),n("div",[n("b-button",{staticClass:"mx-2",attrs:{type:"reset",variant:"secondary"}},[e._v("Сбросить")]),e._v(" "),n("b-button",{staticClass:"mx-2",attrs:{type:"submit",variant:"primary"}},[e._v("Отправить")])],1)],1):n("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmitSignIn(t)}}},[n("b-form-group",{attrs:{id:"login-group",label:"Почта","label-for":"login"}},[n("b-form-input",{attrs:{id:"login",disabled:Boolean(e.signIn.loading),type:"email",required:"",placeholder:"Почта",state:e.$v.signIn.login.username.$dirty?!e.$v.signIn.login.username.$invalid:null},model:{value:e.$v.signIn.login.username.$model,callback:function(t){e.$set(e.$v.signIn.login.username,"$model","string"==typeof t?t.trim():t)},expression:"$v.signIn.login.username.$model"}})],1),e._v(" "),n("b-form-group",{attrs:{id:"password-group",label:"Пароль",state:!e.signIn.err,"label-for":"password"}},[n("b-form-input",{attrs:{id:"password",disabled:Boolean(e.signIn.loading),type:"password",required:"",placeholder:"Пароль",state:e.$v.signIn.login.password.$dirty?!e.$v.signIn.login.password.$invalid:null},model:{value:e.$v.signIn.login.password.$model,callback:function(t){e.$set(e.$v.signIn.login.password,"$model","string"==typeof t?t.trim():t)},expression:"$v.signIn.login.password.$model"}})],1),e._v(" "),n("div",{staticClass:"mt-4"},[n("b-link",{attrs:{to:"/recovery_password"}},[e._v("Забыли пароль?")]),e._v(" "),n("b-button",{staticClass:"float-right",staticStyle:{width:"150px"},attrs:{variant:"primary",type:"submit"}},[e._v("Вход")])],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);
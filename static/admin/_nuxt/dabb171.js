(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{524:function(t,e,r){"use strict";r.r(e);var n=r(28),o=(r(67),r(32),r(23),r(140),r(36),{data:function(){return{user:{f:null,i:null,o:null,mail:null,dt_birth:null,groups:[]},status:!1,groups:[]}},fetch:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(+t.$route.params.id){e.next=4;break}t.$router.replace({path:"/404"}),e.next=21;break;case 4:return r=t.$route.params.id,e.prev=5,e.next=8,t.$axios.get(t.$root.context.env.backendUrl+"/users_old/"+r);case 8:return n=e.sent,t.user=n.data.user,e.next=12,t.$axios.get(t.$root.context.env.backendUrl+"/users_old/groups");case 12:n=e.sent,t.groups=n.data.groups,t.getStatusUser(),t.user||t.$router.replace({path:"/404"}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),t.$router.replace({path:"/404"});case 21:case"end":return e.stop()}}),e,null,[[5,18]])})))()},methods:{showGroupName:function(t){var data=this.groups.find((function(e){return e.id==t}));return data?data.name:null},getStatusUser:function(){var t=this;this.$root.$socket.emit("client_status",this.$route.params.id,(function(e){t.status=e}))}},mounted:function(){var t=this;this.$root.$socket.on("changedStateUser",(function(e){console.log("123"),e==t.$route.params.id&&t.getStatusUser()})),this.$root.$socket.on("changedUser",(function(e){e==t.$route.params.id&&t.$fetch()})),this.$root.$socket.on("changedGroup",(function(){t.$fetch()}))}}),l=r(61),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-row",[r("b-col",{attrs:{cols:"12",lg:"4",xl:"3"}},[r("b-list-group",[r("b-list-group-item",{staticClass:"bg-light py-2 text-center"},[r("b-img",{staticStyle:{height:"10rem",width:"10rem"},attrs:{src:"",blank:"",thumbnail:"",alt:"?",rounded:"circle"}})],1),t._v(" "),r("b-list-group-item",[r("h5",{staticClass:"text-center"},[t._v(t._s(t.user.f)+" "+t._s(t.user.i)+" "+t._s(t.user.o))]),t._v(" "),r("h5",{staticClass:"text-center",class:t.status?"text-success":"text-danger"},[r("b-icon-circle-fill",{staticClass:"mr-2",attrs:{"font-scale":"0.7"}}),t._v(t._s(t.status?"online":"offline"))],1),t._v(" "),r("ul",{staticClass:"p-0",staticStyle:{"list-style":"none"}},[r("li",[r("strong",{staticClass:"mr-3"},[t._v("Mail:")]),t._v(" "+t._s(t.user.mail))]),t._v(" "),r("li",[r("strong",{staticClass:"mr-3"},[t._v("Дата рождения:")]),t._v(" "+t._s(t.user.dt_birth))]),t._v(" "),r("li",[r("b-link",{directives:[{name:"b-toggle",rawName:"v-b-toggle.groupCollapseUser",modifiers:{groupCollapseUser:!0}}],staticClass:"text-secondary font-weight-bold",staticStyle:{"text-decoration":"none"}},[t._v("Состоит в группах "),r("b-icon-caret-down-fill")],1),t._v(" "),r("b-collapse",{staticClass:"my-2 pl-4",attrs:{id:"groupCollapseUser"}},[t._l(t.user.groups,(function(e){return[r("div",{key:e},[t._v(t._s(e)+" - "+t._s(t.showGroupName(e)))])]}))],2)],1)])]),t._v(" "),r("b-list-group-item",{staticClass:"text-center",attrs:{variant:"success",to:"/users/"+t.user.id+"/edit"}},[t._v("\n                Редактировать\n            ")])],1)],1),t._v(" "),r("b-col",{attrs:{cols:"12",lg:"8",xl:"9"}})],1)}),[],!1,null,null,null);e.default=component.exports}}]);
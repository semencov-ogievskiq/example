(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{491:function(t,e,r){var map={"./af":356,"./af.js":356,"./ar":357,"./ar-dz":358,"./ar-dz.js":358,"./ar-kw":359,"./ar-kw.js":359,"./ar-ly":360,"./ar-ly.js":360,"./ar-ma":361,"./ar-ma.js":361,"./ar-sa":362,"./ar-sa.js":362,"./ar-tn":363,"./ar-tn.js":363,"./ar.js":357,"./az":364,"./az.js":364,"./be":365,"./be.js":365,"./bg":366,"./bg.js":366,"./bm":367,"./bm.js":367,"./bn":368,"./bn-bd":369,"./bn-bd.js":369,"./bn.js":368,"./bo":370,"./bo.js":370,"./br":371,"./br.js":371,"./bs":372,"./bs.js":372,"./ca":373,"./ca.js":373,"./cs":374,"./cs.js":374,"./cv":375,"./cv.js":375,"./cy":376,"./cy.js":376,"./da":377,"./da.js":377,"./de":378,"./de-at":379,"./de-at.js":379,"./de-ch":380,"./de-ch.js":380,"./de.js":378,"./dv":381,"./dv.js":381,"./el":382,"./el.js":382,"./en-au":383,"./en-au.js":383,"./en-ca":384,"./en-ca.js":384,"./en-gb":385,"./en-gb.js":385,"./en-ie":386,"./en-ie.js":386,"./en-il":387,"./en-il.js":387,"./en-in":388,"./en-in.js":388,"./en-nz":389,"./en-nz.js":389,"./en-sg":390,"./en-sg.js":390,"./eo":391,"./eo.js":391,"./es":392,"./es-do":393,"./es-do.js":393,"./es-mx":394,"./es-mx.js":394,"./es-us":395,"./es-us.js":395,"./es.js":392,"./et":396,"./et.js":396,"./eu":397,"./eu.js":397,"./fa":398,"./fa.js":398,"./fi":399,"./fi.js":399,"./fil":400,"./fil.js":400,"./fo":401,"./fo.js":401,"./fr":402,"./fr-ca":403,"./fr-ca.js":403,"./fr-ch":404,"./fr-ch.js":404,"./fr.js":402,"./fy":405,"./fy.js":405,"./ga":406,"./ga.js":406,"./gd":407,"./gd.js":407,"./gl":408,"./gl.js":408,"./gom-deva":409,"./gom-deva.js":409,"./gom-latn":410,"./gom-latn.js":410,"./gu":411,"./gu.js":411,"./he":412,"./he.js":412,"./hi":413,"./hi.js":413,"./hr":414,"./hr.js":414,"./hu":415,"./hu.js":415,"./hy-am":416,"./hy-am.js":416,"./id":417,"./id.js":417,"./is":418,"./is.js":418,"./it":419,"./it-ch":420,"./it-ch.js":420,"./it.js":419,"./ja":421,"./ja.js":421,"./jv":422,"./jv.js":422,"./ka":423,"./ka.js":423,"./kk":424,"./kk.js":424,"./km":425,"./km.js":425,"./kn":426,"./kn.js":426,"./ko":427,"./ko.js":427,"./ku":428,"./ku.js":428,"./ky":429,"./ky.js":429,"./lb":430,"./lb.js":430,"./lo":431,"./lo.js":431,"./lt":432,"./lt.js":432,"./lv":433,"./lv.js":433,"./me":434,"./me.js":434,"./mi":435,"./mi.js":435,"./mk":436,"./mk.js":436,"./ml":437,"./ml.js":437,"./mn":438,"./mn.js":438,"./mr":439,"./mr.js":439,"./ms":440,"./ms-my":441,"./ms-my.js":441,"./ms.js":440,"./mt":442,"./mt.js":442,"./my":443,"./my.js":443,"./nb":444,"./nb.js":444,"./ne":445,"./ne.js":445,"./nl":446,"./nl-be":447,"./nl-be.js":447,"./nl.js":446,"./nn":448,"./nn.js":448,"./oc-lnc":449,"./oc-lnc.js":449,"./pa-in":450,"./pa-in.js":450,"./pl":451,"./pl.js":451,"./pt":452,"./pt-br":453,"./pt-br.js":453,"./pt.js":452,"./ro":454,"./ro.js":454,"./ru":455,"./ru.js":455,"./sd":456,"./sd.js":456,"./se":457,"./se.js":457,"./si":458,"./si.js":458,"./sk":459,"./sk.js":459,"./sl":460,"./sl.js":460,"./sq":461,"./sq.js":461,"./sr":462,"./sr-cyrl":463,"./sr-cyrl.js":463,"./sr.js":462,"./ss":464,"./ss.js":464,"./sv":465,"./sv.js":465,"./sw":466,"./sw.js":466,"./ta":467,"./ta.js":467,"./te":468,"./te.js":468,"./tet":469,"./tet.js":469,"./tg":470,"./tg.js":470,"./th":471,"./th.js":471,"./tk":472,"./tk.js":472,"./tl-ph":473,"./tl-ph.js":473,"./tlh":474,"./tlh.js":474,"./tr":475,"./tr.js":475,"./tzl":476,"./tzl.js":476,"./tzm":477,"./tzm-latn":478,"./tzm-latn.js":478,"./tzm.js":477,"./ug-cn":479,"./ug-cn.js":479,"./uk":480,"./uk.js":480,"./ur":481,"./ur.js":481,"./uz":482,"./uz-latn":483,"./uz-latn.js":483,"./uz.js":482,"./vi":484,"./vi.js":484,"./x-pseudo":485,"./x-pseudo.js":485,"./yo":486,"./yo.js":486,"./zh-cn":487,"./zh-cn.js":487,"./zh-hk":488,"./zh-hk.js":488,"./zh-mo":489,"./zh-mo.js":489,"./zh-tw":490,"./zh-tw.js":490};function o(t){var e=l(t);return r(e)}function l(t){if(!r.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}o.keys=function(){return Object.keys(map)},o.resolve=l,t.exports=o,o.id=491},521:function(t,e,r){"use strict";r.r(e);r(13),r(12),r(15),r(11),r(16);var o=r(3),l=(r(9),r(76)),n=r(88),c=r(354),m=r.n(c);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function j(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={data:function(){return{formFilter:{mail:"",f:"",i:"",o:"",dt_birth_from:"",dt_birth_to:"",groups:[]},table:{busy:!1,totalRows:0,fields:[{key:"status",label:"Статус",sortable:!1},{key:"id",label:"id",sortable:!0},{key:"f",label:"Фамилия",sortable:!0},{key:"i",label:"Имя",sortable:!0},{key:"o",label:"Отчество",sortable:!0},{key:"mail",label:"Почта",sortable:!0},{key:"dt_birth",label:"Дата рождения",sortable:!0},{key:"actions",label:"",sortable:!1}]}}},computed:j(j({},Object(l.b)("cache/usersReqParams",{perPage:"query.perPage",currentPage:"query.currentPage",sortBy:"query.sortBy",sortDesc:"query.sortDesc",filter:"query.filter"})),{},{groups:function(){return this.$store.state.dict.groups}}),methods:j(j({},Object(n.c)("cache/usersReqParams",["setQueryDefault"])),{},{resetFilter:function(){this.formFilter={mail:"",f:"",i:"",o:"",dt_birth_from:"",dt_birth_to:"",groups:[]},this.setQueryDefault()},setFilters:function(){this.filter=j({},this.formFilter)},usersProvider:function(t){var e=this;return t.filter.dt_birth_from&&(t.filter.dt_birth_from=m()(t.filter.dt_birth_from).format("DD.MM.YYYY")),t.filter.dt_birth_to&&(t.filter.dt_birth_to=m()(t.filter.dt_birth_to).format("DD.MM.YYYY")),this.$axios.get(t.apiUrl,{params:{page:t.currentPage,perPage:this.perPage,sortBy:t.sortBy,sortDesc:t.sortDesc,filter:t.filter}}).then((function(t){return t.data.count&&t.data.users?(e.table.totalRows=t.data.count,t.data.users):(e.table.totalRows=0,[])})).catch((function(t){return console.log(t),e.table.totalRows=0,[]}))}}),created:function(){this.formFilter=j({},this.filter)}},h=r(61),component=Object(h.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-row",[r("b-col",{attrs:{cols:"12"}},[r("h1",[t._v("Пользователи")])]),t._v(" "),r("b-col",{attrs:{"order-lg":"2",xl:"2",lg:"2"}},[r("b-form",{on:{submit:function(e){return e.preventDefault(),t.setFilters(e)},reset:function(e){return e.preventDefault(),t.resetFilter(e)}}},[r("b-form-row",[r("b-col",{attrs:{md:"6",lg:"12"}},[r("b-form-group",{attrs:{"label-size":"sm",label:"Email","label-align":"center"}},[r("b-form-input",{attrs:{id:"Email",size:"sm",type:"text"},model:{value:t.formFilter.mail,callback:function(e){t.$set(t.formFilter,"mail","string"==typeof e?e.trim():e)},expression:"formFilter.mail"}})],1)],1),t._v(" "),r("b-col",{attrs:{md:"6",lg:"12"}},[r("b-form-group",{attrs:{"label-size":"sm",label:"Фамилия","label-align":"center"}},[r("b-form-input",{attrs:{id:"F",size:"sm",type:"text"},model:{value:t.formFilter.f,callback:function(e){t.$set(t.formFilter,"f","string"==typeof e?e.trim():e)},expression:"formFilter.f"}})],1)],1),t._v(" "),r("b-col",{attrs:{md:"6",lg:"12"}},[r("b-form-group",{attrs:{"label-size":"sm",label:"Имя","label-align":"center"}},[r("b-form-input",{attrs:{id:"I",size:"sm",type:"text"},model:{value:t.formFilter.i,callback:function(e){t.$set(t.formFilter,"i","string"==typeof e?e.trim():e)},expression:"formFilter.i"}})],1)],1),t._v(" "),r("b-col",{attrs:{md:"6",lg:"12"}},[r("b-form-group",{attrs:{"label-size":"sm",label:"Отчество","label-align":"center"}},[r("b-form-input",{attrs:{id:"O",size:"sm",type:"text"},model:{value:t.formFilter.o,callback:function(e){t.$set(t.formFilter,"o","string"==typeof e?e.trim():e)},expression:"formFilter.o"}})],1)],1),t._v(" "),r("b-col",{attrs:{md:"6",lg:"12"}},[r("b-form-group",{attrs:{"label-size":"sm",label:"С даты рожденья"}},[r("b-form-datepicker",{attrs:{id:"fromDB",size:"sm",placeholder:"","date-format-options":{day:"numeric",month:"numeric",year:"numeric"},locale:"ru"},model:{value:t.formFilter.dt_birth_from,callback:function(e){t.$set(t.formFilter,"dt_birth_from","string"==typeof e?e.trim():e)},expression:"formFilter.dt_birth_from"}})],1)],1),t._v(" "),r("b-col",{attrs:{md:"6",lg:"12"}},[r("b-form-group",{attrs:{"label-size":"sm",label:"По дату рожденья"}},[r("b-form-datepicker",{attrs:{id:"toDB",size:"sm",placeholder:"","date-format-options":{day:"numeric",month:"numeric",year:"numeric"},locale:"ru"},model:{value:t.formFilter.dt_birth_to,callback:function(e){t.$set(t.formFilter,"dt_birth_to","string"==typeof e?e.trim():e)},expression:"formFilter.dt_birth_to"}})],1)],1),t._v(" "),r("b-col",{attrs:{md:"12"}},[r("b-form-group",{attrs:{"label-size":"sm",label:"Группы"}},[r("b-form-checkbox-group",{model:{value:t.formFilter.groups,callback:function(e){t.$set(t.formFilter,"groups",e)},expression:"formFilter.groups"}},t._l(t.groups,(function(e){return r("b-form-checkbox",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],key:e.id,attrs:{value:e.id,title:e.description}},[t._v(t._s(e.name))])})),1)],1)],1),t._v(" "),r("b-col",{attrs:{"offset-md":"6",md:"3","offset-lg":"0",lg:"12"}},[r("b-button",{staticClass:"w-100 my-1",attrs:{variant:"light",type:"reset"}},[t._v("Сбросить")])],1),t._v(" "),r("b-col",{attrs:{md:"3",lg:"12"}},[r("b-button",{staticClass:"w-100 my-1",attrs:{variant:"primary",type:"submit"}},[t._v("Применить")])],1)],1)],1)],1),t._v(" "),r("b-col",{attrs:{"order-lg":"1",xl:"10",lg:"10"}},[r("b-table",{attrs:{id:"tableUsers",items:t.usersProvider,fields:t.table.fields,filter:t.filter,busy:t.table.busy,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"current-page":t.currentPage,"per-page":0,hover:"",responsive:"","head-variant":"dark","api-url":t.$root.context.env.backendUrl+"/users_old",small:""},on:{"update:busy":function(e){return t.$set(t.table,"busy",e)},"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"cell(status)",fn:function(data){return[r("span",{class:data.item.status?"text-success":"text-danger"},[r("b-icon-circle-fill",{attrs:{"font-scale":"0.7"}}),t._v("\n            "+t._s(data.item.status?"online":"offline")+"\n          ")],1)]}},{key:"head(actions)",fn:function(){return[r("div",{staticClass:"text-right"},[r("b-link",{staticClass:"text-light h5",on:{click:function(e){return t.$root.$emit("bv::refresh::table","tableUsers")}}},[r("b-icon-arrow-clockwise")],1)],1)]},proxy:!0},{key:"cell(actions)",fn:function(data){return[r("nuxt-link",{staticClass:"text-success float-right",attrs:{to:"/users/"+data.item.id}},[r("b-icon-search")],1)]}},{key:"table-busy",fn:function(){return[r("div",{staticClass:"text-center text-primary my-2"},[r("b-spinner",{staticClass:"align-middle"}),t._v(" "),r("strong",[t._v("Загрузка...")])],1)]},proxy:!0}])}),t._v(" "),t.table.totalRows/t.perPage>=2?r("b-pagination",{attrs:{pills:"",align:"center","total-rows":t.table.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);